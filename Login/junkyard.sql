BEGIN;
CREATE DATABASE IF NOT EXISTS Junkyard;
USE Junkyard;

CREATE TABLE PART (
    PART_ID INT PRIMARY KEY,
    PART_NAME VARCHAR(45),
    PART_COST INT,
    PART_CATEGORY VARCHAR(45)
);

CREATE TABLE ENGINE (
    ENGINE_ID INT PRIMARY KEY,
    MAKE VARCHAR(45),
    MODEL VARCHAR(45),
    CYLINDERS VARCHAR(45),
    INDUCTION VARCHAR(45),
    DISPLACEMENT VARCHAR(45)
);

CREATE TABLE CAR (
    CAR_ID INT PRIMARY KEY,
    MAKE VARCHAR(45),
    MODEL VARCHAR(45),
    YEAR INT,
    VIN VARCHAR(45),
    ENGINE_ID INT REFERENCES ENGINE(ENGINE_ID)
);

CREATE TABLE LISTING (
    LISTING_ID INT PRIMARY KEY,
    LISTING_LOT INT,
    LISTING_DATE DATE,
    LISTING_VIN VARCHAR(45),
    LISTING_EXT_COLOR VARCHAR(45),
    LISTING_INT_COLOR VARCHAR(45),
    CAR_ID INT REFERENCES CAR(CAR_ID),
    ENGINE_ID INT REFERENCES ENGINE(ENGINE_ID),
    LISTING_PARTS_LISTING_ID INT
);

CREATE TABLE LISTING_PARTS (
    LISTING_ID INT,
    PART_ID INT,
    PRIMARY KEY (LISTING_ID, PART_ID),
    FOREIGN KEY (LISTING_ID) REFERENCES LISTING(LISTING_ID),
    FOREIGN KEY (PART_ID) REFERENCES PART(PART_ID)
);

-- Sample values for PART table
INSERT INTO PART (PART_ID, PART_NAME, PART_COST, PART_CATEGORY)
VALUES
(1, 'Alternator', 65, 'Engine'),
(2, 'Catalytic Converter', 120, 'Exhaust'),
(3, 'Brake Pad Set', 40, 'Brakes'),
(4, 'Spark Plug', 5, 'Ignition'),
(5, 'Air Filter', 15, 'Filters');

-- Sample values for ENGINE table
INSERT INTO ENGINE (ENGINE_ID, MAKE, MODEL, CYLINDERS, INDUCTION, DISPLACEMENT)
VALUES
(1, 'Toyota', '4A-FE', '4', 'Naturally Aspirated', '1.6L'),
(2, 'Ford', 'EcoBoost', '4', 'Turbocharged', '2.0L'),
(3, 'Chevrolet', 'LS3', '8', 'Naturally Aspirated', '6.2L'),
(4, 'Honda', 'K24A', '4', 'Naturally Aspirated', '2.4L'),
(5, 'Subaru', 'EJ25', '4', 'Naturally Aspirated', '2.5L');

-- Sample values for CAR table
INSERT INTO CAR (CAR_ID, MAKE, MODEL, YEAR, VIN, ENGINE_ID)
VALUES
(101, 'Toyota', 'Corolla', 2020, '1HGBH41JXMN109186', 1),
(102, 'Ford', 'Mustang', 2018, '1FA6P8TH0J5123456', 2),
(103, 'Chevrolet', 'Camaro', 2019, '2G1FB1E30K9187654', 3),
(104, 'Honda', 'Civic', 2022, 'SHSRD78875U336227', 4),
(105, 'Subaru', 'Impreza', 2021, 'JF1GJAA67DH800002', 5);

-- Sample values for LISTING table
INSERT INTO LISTING (LISTING_ID, LISTING_LOT, LISTING_DATE, LISTING_VIN, LISTING_EXT_COLOR, LISTING_INT_COLOR, CAR_ID, ENGINE_ID, LISTING_PARTS_LISTING_ID)
VALUES
(1001, 13, '2023-09-15', 'WBA4Z3C56L5P49801', 'Silver', 'Black', 101, 2, 1),
(1002, 15, '2023-09-16', '1HGCM82633A123456', 'Blue', 'Gray', 102, 4, 2),
(1003, 17, '2023-09-17', '5XXGT4L37KG505050', 'Red', 'Black', 103, 3, 3),
(1004, 19, '2023-09-18', 'JM3KFADL8L0707070', 'White', 'Beige', 104, 5, 4),
(1005, 21, '2023-09-19', '1HGCV1F36JA222222', 'Black', 'Black', 105, 1, 5);

-- Sample values for LISTING_PARTS table
INSERT INTO LISTING_PARTS (LISTING_ID, PART_ID)
VALUES
(1001, 1),
(1002, 2),
(1003, 3),
(1004, 4),
(1005, 5);
